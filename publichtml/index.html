<html>

<head>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"
		integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script type="text/javascript">
		function pythonRequest() {
			var requestStatusElement = document.getElementById("requestStatus");

			//Post username to Flask server using AJAX, with the username formatted as JSON
			var usernameValue = document.getElementById("usernameInput").value;
			var myData = { username: usernameValue };
			myData = JSON.stringify(myData);
			requestStatusElement.innerHTML = "Analyzing games from " + usernameValue + "...";
			$.ajax({
				url: "http://127.0.0.1:5000",
				type: "POST",
				data: myData,
				contentType: "application/json",
				dataType: "text",
				error: function (xhr, statusText, errorThrown) {

					requestStatusElement.innerHTML = errorThrown;
				}
			}).done(function (data) {
				requestStatusElement.innerHTML = data;
			});

		}
	</script>
</head>

<body>
	<label for="usernameInput">Username:</label>
	<input id="usernameInput" name="usernameInput"></input>
	<button onclick="pythonRequest()">Click to send username <br> to Python function</button>
	<div id="requestStatus"></div>
</body>

</html>
